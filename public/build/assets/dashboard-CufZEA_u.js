import{r,j as t,L as N,a as x}from"./app-BH6e6zrk.js";import{A as w}from"./app-layout-DWGHKJrw.js";import"./app-logo-icon-DgpCPPRX.js";import"./index-CpT-smFx.js";import"./index-CifSOb6S.js";const j=[{title:"Dashboard",href:"/dashboard"}];function S(){const[h,b]=r.useState([]),[m,i]=r.useState(null),[o,n]=r.useState(""),[s,d]=r.useState(""),[y,p]=r.useState(null),[c,u]=r.useState(null),g=async()=>{x.get("/notes/list").then(e=>{b(e.data)}).catch(e=>{console.error("Failed to load notes:",e)})},f=async()=>{var e,a;try{const l=await x.post("/notes/save",{note_id:m,title:o,details:s});(a=(e=l.data)==null?void 0:e.note)!=null&&a.id&&i(l.data.note.id),console.log("Note saved")}catch(l){console.error("Failed to save note:",l)}},v=async e=>{try{await x.delete(`/notes/${e}`),console.log("Note deleted"),g(),m===e&&(i(null),n(""),d(""))}catch(a){console.error("Failed to delete note:",a)}};return r.useEffect(()=>{y&&clearTimeout(y);const e=setTimeout(()=>{(c===null||o.trim()!==c.title.trim()||s.trim()!==c.details.trim())&&(o.trim()||s.trim())&&(f(),u({title:o.trim(),details:s.trim()}),g())},1e3);return p(e),()=>clearTimeout(e)},[o,s]),r.useEffect(()=>{g()},[]),t.jsxs(w,{breadcrumbs:j,children:[t.jsx(N,{title:"Dashboard"}),t.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:"w-1/4 h-full overflow-y-auto border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"ðŸ“ My Notes"}),t.jsx("button",{onClick:()=>{i(null),n(""),d(""),u({title:"",details:""})},className:"text-sm text-white bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded-md transition",title:"New Note",children:"+ New"})]}),h.map(e=>t.jsxs("div",{className:"group flex justify-between items-center p-3 rounded-lg bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition cursor-pointer",onClick:()=>{n(e.title||""),d(e.details||""),i(e.id),u({title:e.title||"",details:e.details||""})},children:[t.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-100 truncate",children:e.title}),t.jsx("button",{onClick:a=>{a.stopPropagation(),window.confirm("Are you sure you want to delete this note?")&&v(e.id)},className:"text-red-500 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete note",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M9 7h6m2 0a1 1 0 01-1 1H6a1 1 0 01-1-1m3-3h8a1 1 0 011 1v1H5V5a1 1 0 011-1z"})})})]},e.id))]}),t.jsxs("div",{className:"w-3/4 h-full p-6 overflow-y-auto bg-white dark:bg-gray-900 rounded-xl border border-sidebar-border/70 dark:border-sidebar-border space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Note Title"}),t.jsx("input",{type:"text",value:o,onChange:e=>n(e.target.value),placeholder:"Enter your note title...",className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Note Details"}),t.jsx("textarea",{rows:12,value:s,onChange:e=>d(e.target.value),placeholder:"Write your note here...",className:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]})]})]})})]})}export{S as default};
