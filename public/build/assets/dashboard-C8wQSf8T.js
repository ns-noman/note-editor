import{r as a,j as t,L as j,a as x}from"./app-C4rzhlGH.js";import{A as k}from"./app-layout-H_MU8DKC.js";import"./app-logo-icon-CkATsYp5.js";import"./index-YxjCNWuA.js";import"./index-DEKoSQai.js";const S=[{title:"Dashboard",href:"/dashboard"}];function E(){const[b,p]=a.useState([]),[h,n]=a.useState(null),[o,i]=a.useState(""),[l,d]=a.useState(""),[y,f]=a.useState(null),[g,c]=a.useState(null),[v,u]=a.useState(!1),m=async()=>{try{const e=await x.get("/notes/list");p(e.data)}catch(e){console.error("Failed to load notes:",e)}},w=async()=>{var e,r;try{const s=await x.post("/notes/save",{note_id:h,title:o.trim(),details:l.trim()});(r=(e=s.data)==null?void 0:e.note)!=null&&r.id&&n(s.data.note.id),console.log("Note saved")}catch(s){console.error("Failed to save note:",s)}},N=async e=>{try{await x.delete(`/notes/${e}`),console.log("Note deleted"),m(),h===e&&(n(null),i(""),d(""),c(null),u(!1))}catch(r){console.error("Failed to delete note:",r)}};return a.useEffect(()=>{y&&clearTimeout(y);const e=setTimeout(()=>{(g===null||o.trim()!==g.title.trim()||l.trim()!==g.details.trim())&&(o.trim()||l.trim())&&(async()=>(await w(),c({title:o.trim(),details:l.trim()}),m()))()},1e3);return f(e),()=>clearTimeout(e)},[o,l]),a.useEffect(()=>{m()},[]),t.jsxs(k,{breadcrumbs:S,children:[t.jsx(j,{title:"Dashboard"}),t.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:"w-1/4 h-full overflow-y-auto border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-4 space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"📝 My Notes"}),t.jsx("button",{onClick:()=>{n(null),i(""),d(""),c(null),u(!1)},className:"text-sm text-white bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded-md transition",title:"New Note",children:"+ New"})]}),b.map(e=>t.jsxs("div",{className:"group flex justify-between items-center p-3 rounded-lg bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition cursor-pointer",onClick:()=>{i(e.title||""),d(e.details||""),n(e.id),c({title:e.title||"",details:e.details||""}),u(!0)},children:[t.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-100 truncate",children:e.title}),t.jsx("button",{onClick:r=>{r.stopPropagation(),window.confirm("Are you sure you want to delete this note?")&&N(e.id)},className:"text-red-500 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete note",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M9 7h6m2 0a1 1 0 01-1 1H6a1 1 0 01-1-1m3-3h8a1 1 0 011 1v1H5V5a1 1 0 011-1z"})})})]},e.id))]}),t.jsxs("div",{className:"w-3/4 h-full p-2 overflow-y-auto bg-white dark:bg-red-900 rounded-xl border border-sidebar-border/70 dark:border-sidebar-border space-y-0",children:[t.jsx("input",{type:"text",value:o,onChange:e=>{i(e.target.value),u(!0)},placeholder:"Title",className:"w-full rounded-t-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("textarea",{rows:30,value:l,onChange:e=>{const r=e.target.value;if(d(r),!v){const s=r.trimStart();s.length>0&&i(s.substring(0,30))}},placeholder:"Write your note here...",className:"w-full rounded-b-lg border-t-0 border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]})]})})]})}export{E as default};
